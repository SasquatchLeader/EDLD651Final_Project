---
title: "DraftDataScript"
author: "Heather Leonard" "Abbie Sanders" "Rebecca Gordon" 
date: "11/13/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(rio)
library(tidyverse)
library(here)
library(janitor)

```
```{r}
synthdata <- read.csv(here ("data", "synthdata.csv")) %>%
  as_tibble()
```

Final project must use the following functions: pivot_longer(), select(), filter(), mutate(), pivot_wider(), group_by(), and summarize().

Research question: Is internet overuse associated with sleep outcomes (total sleep, daytime sleepiness) in adolescents?

covariates: dm_childage_bl, dm_sex_bl, dm_lunch_bl 

1. select() and filter() will be used for narrowing down data to the variables we want
2. recode io variables will use mutate()
3. record age variable will use mutate()
4. create the composite score for io variables
5. in ggplot we can use group_by()
6. summarize() by making a descriptives/summary table, possibly use pivots


Make composite score for internet overuse, using variables io1_bl, io2_bl, io3_bl, and io4_bl. Levels include i don't know, never, rarely, sometimes, often, (1-5); new code is 0-4 scores with composite range of 0-16.
```{r, Abbie}
#recode internet overuse score and create a composite score 
synthdata <- synthdata %>%
  mutate(io1_RC = recode(io1_bl, "i don't know" = 0, "never" = 1, "often" = 2, "rarely" = 3, "sometimes" = 4))%>%
  mutate(io2_RC = recode(io2_bl, "i don't know" = 0, "never" = 1, "often" = 2, "rarely" = 3, "sometimes" = 4)) %>%
  mutate(io3_RC = recode(io3_bl, "i don't know" = 0, "never" = 1, "often" = 2, "rarely" = 3, "sometimes" = 4)) %>%
  mutate(io4_RC = recode(io4_bl, "i don't know" = 0, "never" = 1, "often" = 2, "rarely" = 3, "sometimes" = 4)) %>%
  mutate(io_comp = io1_RC + io2_RC + io3_RC + io4_RC)

#recode age
synthdata$age_RC <- as.numeric(str_sub(synthdata$dm_childage_bl, 1,2)) 

```

```{r, Rebecca_ggplot}

#Removes all "i don't know" values
synthdata <- synthdata %>% 
filter(synthdata$age_RC != "i don't know" & synthdata$dm_lunch_bl != "i don't know")

synthdata %>% 
  ggplot(aes(io_comp, age_RC)) +
  geom_jitter(aes(color = age_RC)) +
  geom_smooth(method = "lm") +
  facet_wrap(~dm_lunch_bl) +
  labs(title = 'Relation between internet overuse and age', subtitle = 'Scatter plot by welfare status', x = 'Internet Overuse score', y = 'Student age', color = 'Age')
```



